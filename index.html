<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Daksh's Terminal</title>
  <style>
    body {
      background-color: #000;
      color: #00FF00;
      font-family: 'Courier New', monospace;
      font-size: 16px;
      padding: 20px;
    }

    .line {
      display: block;
      white-space: pre;
    }

    .prompt {
      color: #FF4136; /* Red */
    }

    .cursor {
      display: inline-block;
      width: 10px;
      background-color: #00ff00;
      animation: blink 1s steps(2, start) infinite;
      margin-left: 2px;
    }

    @keyframes blink {
      to { visibility: hidden; }
    }

    a {
      color: #00FF00;
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div id="terminal"></div>

  <script>
    const terminal = document.getElementById("terminal");

    const terminalPrompt = '<span class="prompt">daksh@localhost:/home/daksh > $</span> ';

    const script = [
      { type: "command", text: "whoami" },
      { type: "output", text: "Hi, I'm Daksh. A cybersecurity enthusiast, info-sec geek & digital ninja. 🛡️👨‍💻" },
      { type: "spacer" },
      { type: "command", text: "skills" },
      { type: "output", text: "JavaScript, Python, Linux, Cyber Law, GRC, ISO 27001, SOC 2, DPDP Act" },
      { type: "spacer" },
      { type: "command", text: "projects" },
      { type: "output", text: "🔗 GitHub: https://github.com/your-username" },
      { type: "spacer" },
      { type: "command", text: "contact" },
      { type: "output", text: "📧 Email: daksh@example.com" },
      { type: "output", text: "🐦 Twitter: @yourhandle" },
      { type: "spacer" },
      { type: "command", text: "exit" },
      { type: "output", text: "Session terminated. See you in the matrix. ☠️" }
    ];

    let lineIndex = 0;
    let charIndex = 0;
    let currentLine = null;
    let fullTextRaw = "";
    let fullTextHtml = "";

    function typeNextChar() {
      if (lineIndex >= script.length) {
        const cursor = document.querySelector(".cursor");
        if (cursor) cursor.remove();
        return;
      }

      const entry = script[lineIndex];

      if (entry.type === "spacer") {
        const spacer = document.createElement("div");
        spacer.classList.add("line");
        spacer.innerHTML = " ";
        terminal.appendChild(spacer);
        lineIndex++;
        setTimeout(typeNextChar, 150);
        return;
      }

      if (!currentLine) {
        currentLine = document.createElement("div");
        currentLine.classList.add("line");
        terminal.appendChild(currentLine);

        if (entry.type === "command") {
          fullTextHtml = terminalPrompt + entry.text;
          fullTextRaw = stripHtml(terminalPrompt) + entry.text;
        } else {
          fullTextHtml = entry.text;
          fullTextRaw = entry.text;
        }
      }

      if (charIndex < fullTextRaw.length) {
        let displayed = escapeHtml(fullTextRaw.slice(0, charIndex + 1));
        if (entry.type === "command") {
          // Re-attach styled prompt
          displayed = terminalPrompt + escapeHtml(fullTextRaw.slice(stripHtml(terminalPrompt).length, charIndex + 1));
        }
        currentLine.innerHTML = displayed + '<span class="cursor"></span>';
        charIndex++;
        setTimeout(typeNextChar, 35);
      } else {
        currentLine.innerHTML = fullTextHtml;
        currentLine = null;
        charIndex = 0;
        lineIndex++;
        setTimeout(typeNextChar, 300);
      }
    }

    function stripHtml(html) {
      const div = document.createElement("div");
      div.innerHTML = html;
      return div.textContent || div.innerText || "";
    }

    function escapeHtml(text) {
      return text
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;");
    }

    typeNextChar();
  </script>
</body>
</html>
